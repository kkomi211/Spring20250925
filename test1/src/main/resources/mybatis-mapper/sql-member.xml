<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.test1.mapper.MemberMapper">
	<select id="memberLoginId" parameterType="hashmap" resultType="com.example.test1.model.Member">
		SELECT *
		FROM TBL_USER
		WHERE USERID = #{id}
	</select>
	
	<select id="memberLoginPwd" parameterType="hashmap" resultType="com.example.test1.model.Member">
		SELECT *
		FROM TBL_USER
		WHERE PASSWORD = #{pwd}
			AND USERID = #{id}
	</select>
	
	<select id="memberCheck" parameterType="hashmap" resultType="com.example.test1.model.Member">
		SELECT *
		FROM TBL_USER
		WHERE USERID = #{id}
	</select>
	
	<insert id="memberJoin" parameterType="hashmap" useGeneratedKeys="true" keyColumn="USERID" keyProperty="userId">
		INSERT INTO TBL_USER
		VALUES (#{id}, #{pwd}, #{name}, NULL, NULL, NULL, #{addr}, #{phone}, NULL, #{gender}, #{status}, SYSDATE, SYSDATE)
	</insert>
	
	<select id="memberList" parameterType="hashmap" resultType="com.example.test1.model.Member">
		SELECT 
			U.*, 
			DECODE(
				BIRTH,	
				NULL,
				'정보없음',	
				SUBSTR(BIRTH,3,2) || '.' || SUBSTR(BIRTH,5,2) || '.' || SUBSTR(BIRTH,7,2)
			) AS BIRTHDAY
		FROM TBL_USER U
	</select>
	
	<update id="cntUp" parameterType="hashmap">
		UPDATE TBL_USER
		SET CNT = CNT + 1
		WHERE USERID = #{id}
	</update>
	
	<update id="cntZero" parameterType="hashmap">
		UPDATE TBL_USER
		SET CNT = 0
		WHERE USERID = #{id}
	</update>
	
</mapper>




